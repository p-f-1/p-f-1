define("platformInit",["lodash","experiment"],function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1192)}({0:function(t,r){t.exports=e},1177:function(e,t,r){var n,i;n=[r(0),r(259),r(186)],void 0===(i=function(e,t,r){"use strict";return function(n){var i=n.appApi,o=n.siteModel,a=n.isMobileView,s=n.queryUtil,u=n.currentUrl,c=n.isBot,p=n.fetchScripts;u=u||e.get(o,"currentUrl.full",window.document.location.href);var d,l=r.buildScriptsSources(o.serviceTopology,{isDebug:s.getParameterByName("debug")}),f=l.sdkSource,g=l.namespacesSdkSource,m=l.externalComponentsSource,v=l.wixCodeNamespacesAndElementorySupportSource,y=(M=s.getParameterByName("useWixCodeFallback"),"false"!==M&&("true"===M||!window.Worker||c)),w={isMobileView:a,sdkSource:f,namespacesSdkSource:g,externalComponentsSource:m,wixCodeNamespacesAndElementorySupportSource:v,runtimeSource:s.getParameterByName("WixCodeRuntimeSource"),useWixCodeFallback:y},h=s.getParameterByName("viewerPlatformAppSources");var M;w.applications=t.getAppsBaseInfo({rendererModel:o.rendererModel,clientSpecMap:o.rendererModel.clientSpecMap,serviceTopology:o.serviceTopology,viewerPlatformAppSources:h,santaBase:o.santaBase}),d=o.rendererModel.clientSpecMap,i.init(o,d,w,p),function(t){return e.some(t,{type:"siteextension"})||w.applications.length}(d)&&(i.preLoadUserCode(o,u),o.publicModel&&i.preLoadWidgets(o,u))}}.apply(t,n))||(e.exports=i)},1178:function(e){e.exports={WORKER_CREATED:{endpoint:"platform-viewer",src:79,eventId:101,params:{worker_id:"worker_id",ts:"ts"}},WORKER_TERMINATED:{endpoint:"platform-viewer",src:79,eventId:102,params:{worker_id:"worker_id",ts:"ts"}}}},1179:function(e,t,r){var n;void 0===(n=function(){"use strict";return{bootstrapMessage:function(e,t){return{type:"wix_code_worker_bootstrap",bootstrapArguments:e,fetchScriptsCount:t}},loadUserCodeMessage:function(e,t){return{type:"wix_code_worker_load_user_code",workerId:e,wixCode:t}},loadMessage:function(e,t,r,n,i,o,a,s){return{type:"wix_code_worker_load",workerId:e,elementoryArguments:t,wixCode:r,applications:n,sdkParameters:i,routersMap:o,storage:a,rgi:s}},initMessage:function(e,t){return{type:"wix_code_worker_init",id:e,apps:t}},startMessage:function(e,t){return{type:"wix_code_worker_start",context:e,id:t}},storageWasUpdatedMessage:function(e){return{type:"storageWasUpdated",storageValue:e}},updateWixCodeModelDataAfterLoginMessage:function(e,t){return{type:"update_wix_code_model_data_after_login",workerId:e,elementoryArguments:t}},scriptImportMessage:function(e,t){return{type:"script_import_message",url:e,script:t}},stopMessage:function(e){return{contextId:e,type:"stop"}},isStopMessage:function(e){return"stop"===e.type}}}.apply(t,[]))||(e.exports=n)},1180:function(e,t,r){var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();void 0===(n=function(){"use strict";return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"setItem",value:function(e,t){this[e]=String(t)}},{key:"getItem",value:function(e){return this[e]||null}},{key:"removeItem",value:function(e){delete this[e]}},{key:"clear",value:function(){var e=this;Object.keys(this).forEach(function(t){return e.removeItem(t)})}},{key:"toJSON",value:function(){return this.storage.toJSON()}}]),e}()}.apply(t,[]))||(e.exports=n)},1181:function(e,t,r){var n,i;n=[r(0),r(1180)],void 0===(i=function(e,t){"use strict";var r="platform_app_";function n(t){var n={},i=Object.keys(t).filter(function(t){return"string"==typeof t&&e.startsWith(t,r)}),o=!0,a=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var p=u.value;n[p.replace(r,"")]=t.getItem(p)}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}return n}return{get:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?window:{localStorage:new t,sessionStorage:new t};return{serialize:function(){return JSON.stringify({local:n(e.localStorage),session:n(e.sessionStorage)})},setItem:function(t,n,i){e[t].setItem(r+n,i)}}}}}.apply(t,n))||(e.exports=i)},1182:function(e,t,r){var n,i;n=[r(0)],void 0===(i=function(e){"use strict";function t(e){return e&&e.replace(/^https?\:/,"")}function r(r,n){var i=t(r);if(e.startsWith(i,n)){var o=i.slice(n.length).match(/\/?services\/santa\/([\w.]+)/);return o&&o[1]}}return{buildUrl:function(e,n){var i,o=n.runtimeSource,a=e.serviceTopology,s=function(e,n,i,o){if(e)return e;var a=t(o);return r(n,a)||r(i,a)}(o,e.santaBase,a.scriptsLocationMap.santa,a.scriptsDomainUrl),u="/node_modules/santa-wix-code/dist/wixcode-worker.js";return i=a.scriptsLocationMap.santa,/^https?:\/\/localhost(:[0-9]+)?\/?$/.test(i)?u:"/_partials/santa/"+s+u}}}.apply(t,n))||(e.exports=i)},1183:function(e,t,r){var n;void 0===(n=function(){"use strict";return{APPS:{SANTA_MEMBERS:{appDefId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9"},FORM_BUILDER:{appDefId:"14ce1214-b278-a7e4-1373-00cebd1bef7c"}},WIX_CODE_NAMESPACES_AND_ELEMENTORY_SUPPORT_PATH:"/wixCodeNamespacesAndElementorySupport.min.js",DATA_BINDING:"dataBinding",REMOTE_DOM_URL:"//unpkg.parastorage.com/@shimil/remote-dom@3.0.3/dist/remote.min.js",SEMI_NATIVE_SDK_URL:"http://static.parastorage.com/services/semi-native-sdk/1.3.0/lib/wix.min.js",PM_RPC_INTENTS:{INVOKE:"invoke",RPC_RESOLVE:"rpc-resolve",RPC_REJECT:"rpc-reject",API_DESCRIPTION:"api-desc",INVOKE_FUNCTION:"invoke-func",RESOLVE:"resolve",REJECT:"reject",REQUEST_API:"request-api"}}}.apply(t,[]))||(e.exports=n)},1184:function(e,t,r){var n,i,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();n=[r(0),r(1183),r(186),r(1182),r(1181),r(1179)],void 0===(i=function(e,t,r,n,i,a){"use strict";function s(e){return e.publicModel?"site":"preview"}function u(t,r,n){var i=0;return"undefined"!=typeof window&&(n=n&&window.fetch&&!function(e){return e.navigator&&/Edge|Trident/.test(e.navigator.userAgent)}(window),e.forEach(t,function(t){if(n&&e.includes(t.url,"parastorage"))++i,window.fetch(t.url).then(function(e){return e.arrayBuffer()}).then(function(e){r.postMessage(a.scriptImportMessage(t.url,e),[e])});else{var o="prefetch-"+t.id;if(!window.document.getElementById(o)){var s=window.document.createElement("link");s.setAttribute("rel","prefetch"),s.setAttribute("href",t.url),s.setAttribute("id",o),window.document.head.appendChild(s)}}})),i}function c(r){if(!this._standbyWorker){var i=new window.Worker(n.buildUrl(this._siteModel,this._options));i.addEventListener("message",this.onmessage),this._standbyWorker=i,function(r){var n=this._options.applications,i={id:"wixCodeNamespacesAndElementorySupport",url:this._siteModel.serviceTopology.scriptsLocationMap["wix-code-platform"]+t.WIX_CODE_NAMESPACES_AND_ELEMENTORY_SUPPORT_PATH},o={id:"sdk",url:this._options.sdkSource},c={id:"namespaces-sdk",url:this._options.namespacesSdkSource},p={id:"external-components",url:this._options.externalComponentsSource},d={id:"wixCodeNamespacesAndElementorySupport",url:this._options.wixCodeNamespacesAndElementorySupportSource},l=u(function(r,n,i){var o=e.clone(r);return n.some(function(e){return e.id===t.DATA_BINDING})&&(o=o.concat(i)),o.concat(n)}([o,c,p],n,d),this._standbyWorker,r);this._standbyWorker.postMessage(a.bootstrapMessage({sdkParameters:function(){var e="undefined"!=typeof window&&!window.clientSideRender,t="undefined"==typeof window||window.isPseudoWindow;return{viewMode:s(this._siteModel),locale:this._siteModel.rendererModel.languageCode,storage:this._storageManager.serialize(),userWarmup:this._siteModel.userWarmup,renderCycle:e&&!t?2:1,renderingEnv:t?"backend":"browser"}}.call(this),debug:window.__WIX_CODE_DEBUG__,santaVersion:this._siteModel.baseVersion,wixCodeBase:this._siteModel.santaBase+"/node_modules/santa-wix-code",sdkSource:o.url,namespacesSdkSource:c.url,externalComponentsSource:p.url,wixCodeNamespacesAndElementorySupportSource:d.url,wixCodeNamespacesAndElementorySupportScript:i,applications:JSON.stringify(n),initialTimestamp:this._siteModel.wixBiSession.initialTimestamp,metaSiteId:this._siteModel.rendererModel.metaSiteId,openExperiments:(f=this._siteModel.rendererModel.runningExperiments,e.reduce(f,function(e,t,r){return"new"===t&&e.push(r),e},[]))},l));var f}.call(this,!!r)}}function p(e){this._workers[e]=this._standbyWorker,this._reportWorkerCreated(e),this._standbyWorker=null}function d(t,n){return t.reduce(function(t,i){return e.assign(t,(o={},a=i,s=r.getUserCodeUrlsDetails(n,i),a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o));var o,a,s},{})}function l(t){var r=this;return function(n){var i=n.data;e.isMatch(i,{intent:"BROWSER_API",type:"setToStorage"})&&function(t){var r=this,n=t.type,i=t.key,o=t.value;this._storageManager.setItem(n,i,o);var s=a.storageWasUpdatedMessage(this._storageManager.serialize());e.forEach(this._workers,function(e,t){r.send(t,s)})}.call(r,i.data),t(n)}}var f=function(){function n(e,t,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._siteModel=e,this._clientSpecMap=t,this._options=i,this._workers={},this._terminatedWorkers={},this._standbyWorker=null,this._storageManager=r}return o(n,[{key:"has",value:function(e){return Boolean(this._workers[e])}},{key:"initialize",value:function(r,n,i,o){this.onmessage=function(r){return function(n){var i=n.data,o=n.ports;e.includes(t.PM_RPC_INTENTS,i.intent)&&window.postMessage(i,"*",o),r(n)}}.call(this,l.call(this,function(e){var t=e.data;return r(t)})),this._reportWorkerCreated=n,this._reportWorkerTerminated=i,c.call(this,o)}},{key:"send",value:function(e,t,r){var n=a.isStopMessage(t)?this._terminatedWorkers[e]:this._workers[e];n&&(r?n.postMessage(t,r):n.postMessage(t))}},{key:"get",value:function(e){return this._workers[e]}},{key:"handleWidgetsCommand",value:function(t,n){var i=this;switch(t.type){case"load_user_code":(function(e){var t=this;Object.keys(e).forEach(function(r){var n=e[r];u(n),t.has(r)||(c.call(t),p.call(t,r)),t.send(r,a.loadUserCodeMessage(r,n))})}).call(this,d(t.rootIds,t.widgets));break;case"load_widgets":(function(e){var t=this,r=e.applications,n=e.rootIds,i=e.wixCodeScriptsByRootId,o=e.elementoryArguments,s=e.routersMap,u=e.sdkParameters,d=e.rgisByRootId;n.forEach(function(e){t.has(e)||(c.call(t),p.call(t,e)),t.send(e,a.loadMessage(e,o,i[e],r,u,s,t._storageManager.serialize(),d[e]))})}).call(this,{applications:e.reject(t.widgets,e.overSome({type:"Page"},{type:"Popup"},{type:"masterPage"})),rootIds:t.rootIds,wixCodeScriptsByRootId:d(t.rootIds,t.widgets),elementoryArguments:r.getElementoryArguments(this._siteModel,this._clientSpecMap,t.widgets,s(this._siteModel)),routersMap:t.routersMap,sdkParameters:t.sdkParameters,rgisByRootId:t.rgisByRootId});break;case"init_widgets":e.forEach(t.contexts,function(e,t){if(!i.has(t))throw new Error("Context id "+t+" is not loaded");i.send(t,a.initMessage(t,e))});break;case"start_widgets":if(!t.contexts)throw new Error("Start message must contain contexts property");e.forEach(t.contexts,function(e,t){if(!i.has(t))throw new Error("Context id "+t+" is not loaded");i.send(t,a.startMessage(e,t))});break;case"trigger_onRender":c.call(this),this.send(t.contextId,t);break;case"stop_widgets":e.forEach(t.widgetIds,function(t){(function(t){var r=this,n=this._workers[t];return!!n&&(delete this._workers[t],this._terminatedWorkers[t]=n,e.defer(function(){r.send(t,a.stopMessage(t)),delete r._terminatedWorkers[t]}),!0)}).call(i,t)&&i._reportWorkerTerminated(t)});break;case"update_wix_code_model_data_after_login":e.forEach(t.rootIds,function(e){i.send(e,a.updateWixCodeModelDataAfterLoginMessage(e,r.getElementoryArguments(i._siteModel,i._clientSpecMap,t.widgets,s(i._siteModel))))});break;default:this.has(t.contextId)&&this.send(t.contextId,t,n)}}},{key:"terminateStandbyWorker",value:function(){this._standbyWorker&&(this._standbyWorker.terminate(),this._standbyWorker=null)}}]),n}();return{getWorkerManager:function(e,t,r,n){return new f(e,t,i.get(r),n)}}}.apply(t,n))||(e.exports=i)},1185:function(e,t,r){var n;void 0===(n=function(){"use strict";return{getCookie:function(e){if("undefined"!=typeof document)return function(e){for(var t={},r=e.split(/;\s*/),n=0,i=r.length;n<i;n++){var o=r[n].split("=");t[o[0]]=o[1]}return t}(window.document.cookie)[e]}}}.apply(t,[]))||(e.exports=n)},1186:function(e,t,r){var n,i;n=[r(186)],void 0===(i=function(e){"use strict";return{appStudioBundler:function(t,r){var n=r.clientSpec,i=r.serviceTopology,o=n.appFields.platform.studio,a=o.wixCodeInstanceId,s=o.wixCodeGridId;return(e.parseQueryParams(window.location.href)["app-studio-bundler-override"]||"https://"+a+".static.pub."+i.wixCloudBaseDomain+"/static/v2")+"/"+s+"/"+a+"/appstudio.viewer.js?module-name=bundle"}}}.apply(t,n))||(e.exports=i)},1187:function(e,t,r){var n,i;n=[r(0)],void 0===(i=function(e){"use strict";return{clientSpec:function(t,r){var n=r.clientSpec;return e.get(n,t)}}}.apply(t,n))||(e.exports=i)},1188:function(e,t,r){var n,i;n=[r(0)],void 0===(i=function(e){"use strict";return{serviceTopology:function(t,r){var n=r.serviceTopology;return e.get(n,t)}}}.apply(t,n))||(e.exports=i)},1189:function(e,t,r){var n,i;n=[r(0),r(1188),r(1187),r(1186)],void 0===(i=function(e){"use strict";var t=e.drop(arguments,1);return e.assign.apply(e,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t)))}.apply(t,n))||(e.exports=i)},1190:function(e,t,r){var n,i,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n=[r(0),r(1189)],void 0===(i=function(e,t){"use strict";var r=/{urlTemplate:(.*)}/,n=function(r,n){return e.reduce(t,function(r,i,o){return function(r,n,i){var o=new RegExp("{"+i+":(.*?)}","g");return r.replace(o,function(r,o){var a=t[i](o,n);if(e.isUndefined(a))throw new Error("Data getter '"+i+"' returned no value for data '"+o+"'");return a})}(r,n,o)},r)};return{resolve:function(t,i){var a=r.exec(t)||[],s=o(a,2)[1];return e.isUndefined(s)?t:n(s,i)}}}.apply(t,n))||(e.exports=i)},1191:function(e,t,r){var n,i;n=[r(0),r(453),r(1184),r(451),r(450),r(1178)],void 0===(i=function(e,t,r,n,i,o){"use strict";function a(t){var r=t.rendererModel.clientSpecMap.toJS?t.rendererModel.clientSpecMap.toJS():t.rendererModel.clientSpecMap;return t.rendererModel.wixCodeModel&&e.some(r,{type:"siteextension"})}return{getApi:function(){var s=n.get(),u=[],c=[],p=!1,d=!1,l=!1,f=!1,g=void 0,m=void 0;function v(e){i.shouldUseFallbackReportBI(e,u)&&i.reportBiWithWixBiSession(e),u.forEach(function(t){t(e)})}return{init:function(t,n,u,c){e.isUndefined(u.applications)&&(u.applications=[]),p?console.warn("Wix code is already initiated"):(m=u.applications.length>0,(a(t)||m)&&((g=r.getWorkerManager(t,n,function(){try{return window.localStorage.setItem("",""),window.localStorage.removeItem(""),!0}catch(e){return!1}}(),u)).initialize(v,function(e){return i.reportBiWithWixBiSession({reportDef:o.WORKER_CREATED,params:{worker_id:e,ts:Date.now()-t.wixBiSession.initialTimestamp}})},function(e){return i.reportBiWithWixBiSession({reportDef:o.WORKER_TERMINATED,params:{worker_id:e,ts:Date.now()-t.wixBiSession.initialTimestamp}})},c),s.setMessageHandler(function(e,t){return g.handleWidgetsCommand(e,t)}),p=!0))},sendMessage:function(e,t){e&&s.sendOrHoldMessage(function(e){return c.reduce(function(e,t){return t(e)},e)}(e),t)},registerMessageHandler:function(e){u.push(e)},registerMessageModifier:function(e){c.push(e)},unregisterMessageHandler:function(t){e.pull(u,t)},preLoadWidgets:function(e,r){!d&&a(e)&&t.asyncGetPreLoadMessage(e,r,function(e){d||(d=!0,s.sendOrHoldMessage(e))})},preLoadUserCode:function(e,r){(!l&&a(e)||m)&&t.asyncGetPreLoadUserCodeMessage(e,r,function(e){l||(l=!0,s.sendOrHoldMessage(e))})},preInitWidgets:function(e,r){!f&&a(e)&&t.asyncGetPreInitMessage(e,r,function(e){f||(f=!0,s.sendOrHoldMessage(e))})},isAppInitiated:function(){return p},getWorkerById:function(e){return g&&g.get(e)},destroyAppsContainer:function(){g&&(g.terminateStandbyWorker(),p=!1,s=n.get())}}}}}.apply(t,n))||(e.exports=i)},1192:function(e,t,r){var n,i;n=[r(1191),r(1177),r(452),r(259),r(453),r(451),r(450),r(186)],void 0===(i=function(e,t,r,n,i,o,a,s){"use strict";return{getAppApi:e.getApi,initMainR:t,specMapUtils:r,appsUtils:n,biUtils:a,widgetsPreLoader:i,registerDeps:i.registerDeps,messageProxy:o,wixCodeUrlUtils:s}}.apply(t,n))||(e.exports=i)},186:function(e,t,r){var n,i,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n=[r(0),r(1185)],void 0===(i=function(e,t){"use strict";function r(e){var t=e.appConfig.userScript;return{id:e.id,url:t.url,scriptName:t.scriptName,displayName:t.displayName,routerData:e.routerData}}return{getUserCodeUrlsDetails:function(t,n){var i=[],o=e.find(t,function(e){return e.id===n&&"masterPage"!==e.type}),a=e.find(t,{id:n,type:"masterPage"});return a&&i.push(r(a)),o&&i.push(r(o)),i},getElementoryArguments:function(r,n,i,o){var a,s=function(t){return e(t).map("appConfig").find()}(i);if(s)return{baseUrl:function(t,r){return t.publicModel?e.trimEnd(t.publicModel.externalBaseUrl,"/")+"/_api/wix-code-public-dispatcher/siteview":"//"+e.find(r,{type:"siteextension"}).instanceId+".dev."+t.serviceTopology.wixCloudBaseDomain}(r,n),queryParameters:(a={scari:s.scari,instance:s.instance,viewMode:o},e.reduce(a,function(t,r,n){return e.isUndefined(r)?t:t.concat([n+"="+r])},[]).join("&")),options:{headers:{"X-XSRF-TOKEN":t.getCookie("XSRF-TOKEN")}}}},parseQueryParams:function(e){var t={};return e.slice(e.indexOf("?")+1).split("&").forEach(function(e){var r=e.split("="),n=o(r,2),i=n[0],a=n[1];t[i]=decodeURIComponent(a)}),t},buildScriptsSources:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sdkSource:e.trimEnd(t.scriptsLocationMap["js-wixcode-sdk"],"/")+"/lib/"+(r.isDebug?"wix.js":"wix.min.js"),namespacesSdkSource:e.trimEnd(t.scriptsLocationMap["wixcode-namespaces"],"/")+"/"+(r.isDebug?"wixcode-namespaces.js":"wixcode-namespaces.min.js"),externalComponentsSource:e.trimEnd(t.scriptsLocationMap["wix-ui-santa"],"/")+"/wixcode/"+(r.isDebug?"wixcode-components.js":"wixcode-components.min.js"),wixCodeNamespacesAndElementorySupportSource:e.trimEnd(t.scriptsLocationMap["wix-code-platform"],"/")+"/wixCodeNamespacesAndElementorySupport.min.js"}}}}.apply(t,n))||(e.exports=i)},259:function(e,t,r){var n,i;n=[r(0),r(8),r(452)],void 0===(i=function(e,t,r){"use strict";var n="1380b703-ce81-ff05-f115-39571d94dfcd",i="675bbcef-18d8-41f5-800e-131ec9e08762";function o(t,r,n){if(t){var i=function(t,r){return e(r).map(function(e){return t.getDynamicPageData(e)}).find()}(t,n);if(i){var o=i.routerData,a=i.routerDefinition;if(o&&a)if("wix-code"===a.appDefinitionId)e.forEach(n,function(t){e.forEach(r,function(e){e.id===t&&(e.routerData=o)})});else{var s=e.find(r,{id:a.appDefinitionId});s&&(s.routerData=o)}}}}function a(t){return e(t).reject({displayName:"siteextension"}).map(function(t){return e.assign({type:s.APPLICATION},t)}).value()}var s={POPUP:"Popup",PAGE:"Page",MASTER_PAGE:"masterPage",APPLICATION:"Application"};function u(t){return!!e.get(t,["wixCodeModel","appData","codeAppId"])}function c(t,r,n){t=e.without(t,"masterPage");var i=a(n);return function(t,r,n,i,o){if(u(i.rendererModel)&&e.find(t,r)){var a=i.isPlatformAppOnPage("masterPage","wixCode");e.forEach(n,function(t){var r=i.isPlatformAppOnPage(t,"wixCode"),n=i.getDataByQuery(t),u=e.get(n,"isPopup");r&&o.push({id:t,type:u?s.POPUP:s.PAGE,displayName:i.getPageTitle(t)}),!u&&a&&o.push({id:t,type:s.MASTER_PAGE})})}}(n,{displayName:"siteextension"},t,r,i),o(r,i,t),i}function p(){for(var e=arguments[0],t=1;t<arguments.length;++t)e=e.replace(/\/$/,"")+"/"+arguments[t].replace(/^\//,"");return e}function d(t,r,n,i){if(u(i)&&e.find(t,{type:"siteextension"})&&!e.find(t,{appDefinitionId:"dataBinding"})){var o=function(e,t,r){var n=p(e.scriptsDomainUrl,"services",t);return r?p(n,r):e.scriptsLocationMap[t]}(r,"dbsm-viewer-app",n.dataBinding);return e.assign({},t,{fakeApplicationId:{appDefinitionId:"dataBinding",appFields:{platform:{viewerScriptUrl:p(o,"/app.js"),viewerVerboseScriptUrl:p(o,"/app.verbose.js")}},type:s.APPLICATION}})}return t}function l(o,a,s){return e(o).filter(function(r){return!(r.appDefinitionId===n&&!t.isOpen("sv_ecomViewerScriptUrl",{rendererModel:a}))&&(r.appDefinitionId===i?u(a):function(t){return e.has(t,"appFields.platform.viewerScriptUrl")}(r))}).map(function(n){var i=e.pickBy({id:n.appDefinitionId,displayName:n.type,appInnerId:n.applicationId,instance:n.instance}),o=function(r,n){var i=e.get(r,"appFields.platform.viewerScriptUrl"),o=e.get(r,"appFields.platform.viewerVerboseScriptUrl");return t.isOpen("wixCodeVerboseMode")&&n&&o?o:i}(n,a.previewMode);return o&&(i.url=r.resolveUrl(o,{serviceTopology:s,clientSpec:n})),i}).value()}function f(t){var r,n=(r=t.viewerPlatformAppSources,e(r||"").split(",").invokeMap("split",/:(.+)/).fromPairs().value()),i=l(d(t.clientSpecMap,t.serviceTopology,n,t.rendererModel),t.rendererModel,t.serviceTopology);return function(t,r,n){if(e.get(t,"port")&&e.get(t,"path")&&e.get(t,"id")){n=e.endsWith(n,"/")?n.slice(0,-1):n;var i=e.template("<%= santaBase %><%= port %>/<%= path %>"),o=void 0;o=/^(http(s)?:)?\/\//.test(t.path)?t.path:"80"===t.port?i({santaBase:n,port:"",path:t.path}):i({santaBase:n,port:":"+t.port,path:t.path}),r.push({type:s.APPLICATION,id:t.id,url:o,displayName:t.id})}}(n,i,t.santaBase),i}function g(t,r,n){return c(r,n,f({clientSpecMap:t,viewerPlatformAppSources:e.get(n,["currentUrl","query","viewerPlatformAppSources"]),serviceTopology:n.serviceTopology,santaBase:n.santaBase,rendererModel:n.rendererModel}))}function m(r,i,o){return"platform.components.AppController"===r.componentType||"platform.components.AppWidget"===r.componentType||function(r,i,o){if(!v(r.componentType))return!1;var a=r.dataQuery.replace("#",""),s=i.getDataByQuery(a,o.id),u=i.getClientSpecMapEntry(s.applicationId);if(e.get(u,"appDefinitionId")===n&&!t.isOpen("sv_ecomViewerScriptUrl",i))return!1;return e.get(u,"appFields.platform.viewerScriptUrl")}(r,i,o)}function v(e){return["wysiwyg.viewer.components.tpapps.TPAMultiSection","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPAWidget"].includes(e)}function y(t,r){var n=e.filter(t,"json"),i=function(t,r){return e(t).transform(function(t,r){e.assign(t,e.get(r,"data.connections_data"))},{}).values().flatMap(function(t){var n=r.resolveData(t,null,r.dataTypes.CONNECTIONS);return e.get(n,"items")}).groupBy("controllerId").value()}(e.map(n,"json"),r);return e.flatMap(n,function(t){var n=e.filter(e.get(t,"json.structure.DESKTOP"),function(e){return m(e,r,t)});return e.map(n,function(n){var o=n.dataQuery.replace("#",""),a=r.getDataByQuery(o,t.id);return v(n.componentType)&&(a.controllerType=function(t,r){var n=r.getClientSpecMapEntry(t.applicationId);return n?t.widgetId||e.findKey(n.widgets,["appPage.hidden",!1]):null}(a,r),a.settings={compId:n.id}),e.omitBy({controllerBehaviors:e.get(r.getDataByQuery(n.behaviorQuery,t.id,r.dataTypes.BEHAVIORS),"items",[]),controllerData:a,controllerId:o,compId:n.id,connections:e.get(i,o),dependencies:function(t,r,n){var i=n.getDataByQuery(t.connectionQuery,r.id,n.dataTypes.CONNECTIONS);return i?e(i.items).filter({type:"ConnectionItem"}).map("controllerId").value():[]}(n,t,r)},e.isUndefined)})})}return{getApplications:g,getUserCodeDefinitions:function(t,r,n){return e.reject(g(t,r,n),{type:s.APPLICATION})},getAppsBaseInfo:function(t){var r=f(t);return e.filter(a(r),"url")},getContextInitData:function(t,r){var n=y(function(t,r){var n=[{id:t,json:r.getPageData(t)}];if(e.get(r.getDataByQuery(t),"isPopup"))return n;var i=r.MASTER_PAGE_ID;return n.concat({id:i,json:r.getMasterPageData()})}(r,t),t);return e.mapValues(function(t){return e(t).groupBy("controllerData.applicationId").mapValues(function(t){return e(t).keyBy("controllerId").mapValues(function(t){return e.pick(t,["controllerData","controllerBehaviors","connections","compId","dependencies"])}).value()}).value()}(n),function(e){return{controllers:e}})}}}.apply(t,n))||(e.exports=i)},450:function(e,t,r){var n,i;n=[r(0)],void 0===(i=function(e){"use strict";return{reportBiWithWixBiSession:function(e){var t=e.reportDef,r=e.params;"undefined"!=typeof window&&(t.errorCode?window.wixBiSession.sendError(t,r.p1,r.p2,r.p3,r.p4):window.wixBiSession.sendBI(t.endpoint,t.eventId,t.src,r))},shouldUseFallbackReportBI:function(t,r){return"WIX_CODE_SITE_API"===t.intent&&"reportBI"===t.type&&e.isEmpty(r)&&"undefined"!=typeof window}}}.apply(t,n))||(e.exports=i)},451:function(e,t,r){var n;void 0===(n=function(){"use strict";return{get:function(){var e=[],t=null;return{sendOrHoldMessage:function(r,n){t?t(r,n):e.push({message:r,ports:n})},setMessageHandler:function(r){for(t=r;e.length>0;){var n=e.shift();t(n.message,n.ports)}}}}}}.apply(t,[]))||(e.exports=n)},452:function(e,t,r){var n,i;n=[r(0),r(1190)],void 0===(i=function(e,t){"use strict";return{getAppSpec:function(t,r){return e.find(t,{appDefinitionId:r})||e.find(t,{type:"siteextension"})},resolveEditorScriptUrl:function(r,n){var i=e.get(r,["appFields","platform"]);if(!e.isUndefined(i)){var o=i.editorScriptUrl;if(!e.isUndefined(o)){var a=t.resolve(o,n);return e.merge({},r,{appFields:{platform:{editorScriptUrl:a}}})}}return r},resolveUrl:t.resolve}}.apply(t,n))||(e.exports=i)},453:function(e,t,r){var n,i;n=[r(259),r(0)],void 0===(i=function(e,t){"use strict";var r=null,n=null,i=null,o=null,a=[];function s(e,i,s,p){if(c())return a.push([e,i,s,p]),void requirejs(["utils","santa-host-platform-services","site-widgets","wixCode"],u);var d=p(r);d.currentUrl=r.urlUtils.parseUrl(e);var l=r.wixUrlParser.parseUrl(d,e),f=l&&l.pageId;if(f&&!t.includes(t.get(d,"publicModel.siteMembersProtectedPages"),f)){var g=i(n,d,f),m=o.wixCodeWidgetService.getWixCodeSpec(d.getClientSpecMap());s(o.messageBuilder.getExtendedMessage(g,d.rendererModel.wixCodeModel||{},m,d))}}function u(e,t,u,p){c()&&(r=e,n=t,i=u,o=p,a.forEach(function(e){return s.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}),a.length=0)}function c(){return!(r&&n&&i&&o)}return{asyncGetPreLoadMessage:function(t,r,n){s(r,function(r,n,i){var o,a,s,u=e.getApplications(t.rendererModel.clientSpecMap,[i],n),c=t.routers||{configMap:{}},p=r.modelBuilderDataHelper.getApi(n),d=r.globalsBuilder.build(p,!0,i);return r.messageBuilder.loadWidgetsMessage(u,c.configMap,[i],(o={},a=i,s=d.toJson(),a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o))},n,function(e){return new e.FullSiteData(t,function(){})})},asyncGetPreLoadUserCodeMessage:function(t,r,n){s(r,function(r,n,i){var o=e.getUserCodeDefinitions(t.rendererModel.clientSpecMap,[i],n);return r.messageBuilder.loadUserCodesMessage(o,[i])},n,function(e){return new e.FullSiteData(t,function(){})})},asyncGetPreInitMessage:function(t,r,n){s(r,function(t,r,n){var i={};return i[n]=e.getContextInitData(r,n),t.messageBuilder.initWidgetsMessage(i)},n,function(){return t})},registerDeps:u}}.apply(t,n))||(e.exports=i)},8:function(e,r){e.exports=t}})});
//# sourceMappingURL=platformInit.min.js.map